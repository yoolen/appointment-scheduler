#!/bin/bash -e

DOCKER_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# we're using docker compose so make sure we can reference docker-compose.yml
cd "$(dirname "$DOCKER_DIR")"

echo "ğŸ”„ Updating Python dependencies in the backend service..."

# Ensure backend service is running
echo "â³ Starting backend service..."
docker compose up -d --no-deps backend

# Wait for backend to be ready
echo "â³ Waiting for backend to be ready..."
sleep 5

# Update dependencies
echo "ğŸ”§ Installing/Updating dependencies from requirements.txt..."
docker compose build --no-cache backend

echo "âœ… Python dependencies updated successfully!"